{
  "project": "Omni-P4",
  "version": "4.1",
  "description": "B&W Formation Wedge Trace Design",
  "units": "mm",

  "outer_shell": {
    "design_reference": "B&W Formation Wedge",
    "front_width": 440,
    "back_width": 19,
    "depth": 243,
    "height": 232,
    "sector_angle_degrees": 120,
    "front_radius": 254,
    "back_radius": 11,
    "wall_thickness": 12,
    "material": "MDF",
    "material_thickness": 12,
    "finish_options": ["Matte Black Paint", "Walnut Veneer", "Fabric Wrap"]
  },

  "elliptical_front": {
    "semi_major_a": 220,
    "semi_minor_b": 116,
    "equation": "(x/220)² + (y/116)² = 1"
  },

  "lcd": {
    "model": "7-inch MIPI-DSI IPS",
    "resolution": "1024x600",
    "active_area": {
      "width": 154,
      "height": 86
    },
    "module_size": {
      "width": 170,
      "height": 105,
      "depth": 5
    },
    "bezel": {
      "width": 190,
      "height": 108,
      "depth": 10
    },
    "inset_depth": 8,
    "position": {
      "x": 0,
      "y": "front_inset",
      "z": 116,
      "reference": "center_vertical"
    }
  },

  "center_tower": {
    "standoff": {
      "material": "A6063 Aluminum",
      "finish": "Black Anodized",
      "thread": "M3",
      "outer_diameter": 6,
      "shape": "hex",
      "pitch": 55
    },
    "levels": {
      "level_1": {
        "name": "Power and Sensors",
        "plate_size": {"width": 80, "depth": 60},
        "z_position": 25,
        "clearance_above": 53,
        "components": ["DFR1015", "WAGO 221", "SCD41", "SGP40", "ENS160", "BMP388", "SHT40", "SEN0428", "SEN0395", "SEN0540"],
        "dxf_file": "shelf_level1_power_sensors.dxf"
      },
      "level_2": {
        "name": "DAC and Amplifier",
        "plate_size": {"width": 85, "depth": 65},
        "z_position": 80,
        "clearance_above": 53,
        "components": ["ES9039Q2M", "TPA3116D2"],
        "dxf_file": "shelf_level2_dac_amp.dxf"
      },
      "level_3": {
        "name": "MCU and Display Interface",
        "plate_size": {"width": 100, "depth": 80},
        "z_position": 135,
        "clearance_above": 30,
        "components": ["ESP32-P4"],
        "features": ["LCD FPC slot", "ReSpeaker USB cable routing"],
        "dxf_file": "shelf_level3_mcu_lcd.dxf"
      }
    },
    "shelf_plate": {
      "material": "A6063-T5 Aluminum",
      "thickness": 2.0,
      "finish": "Black Anodized"
    }
  },

  "speakers": {
    "configuration": "Integrated Acoustic Chamber",
    "note": "Enclosure IS the speaker box (like B&W Formation Wedge)",
    "driver": {
      "model": "Peerless NE65W-04",
      "type": "2.5 inch Full Range",
      "impedance_ohms": 4,
      "power_rms_watts": 15,
      "cutout_diameter": 68,
      "quantity": 2,
      "position_x": 130,
      "position_y_offset": 35
    },
    "passive_radiator": {
      "model": "Dayton Audio ND65PR-4",
      "type": "2.5 inch Passive Radiator",
      "cutout_diameter": 68,
      "quantity": 2,
      "position_x": 130,
      "position_y_offset": -35
    },
    "chamber_volume_per_channel_liters": 6.0,
    "total_internal_volume_liters": 15.6
  },

  "microphone": {
    "model": "ReSpeaker USB Mic Array v2.0",
    "interface": "USB",
    "pcb_diameter": 70,
    "mic_count": 4,
    "mic_arrangement": "circular",
    "features": ["Beamforming", "Echo Cancellation", "LED Ring"],
    "acoustic_mesh": {
      "material": "Stainless Steel 100-mesh",
      "diameter": 65
    },
    "position": {
      "x": 0,
      "y": 121.5,
      "z": 220,
      "orientation": "horizontal",
      "mounting": "top_surface_center"
    },
    "cable_routing": "USB cable routed through Level 3 notch to ESP32-P4"
  },

  "rubber_feet": {
    "quantity": 4,
    "diameter": 20,
    "height": 8,
    "material": "Silicone Rubber",
    "hardness_shore_a": 60,
    "color": "Black",
    "mounting": "Self-adhesive (3M VHB)"
  },

  "thermal": {
    "intake": {
      "location": "bottom",
      "slots": 5,
      "slot_size": {"width": 40, "height": 6}
    },
    "exhaust": {
      "location": "top_perimeter",
      "gap_width": 3
    },
    "heat_sources_watts": {
      "esp32_p4": 1.5,
      "es9039_dac": 0.5,
      "tpa3116_amplifier": 5.0,
      "power_regulators": 2.0
    }
  },

  "electrical": {
    "power_input": {
      "voltage": 24,
      "current_max_amps": 3,
      "connector": "DC barrel 5.5x2.1mm"
    },
    "internal_voltages": [24, 12, 5, 3.3],
    "i2s_0": {
      "function": "DAC output",
      "pins": {"bclk": 12, "ws": 10, "dout": 9, "mclk": 13}
    },
    "usb_host": {
      "function": "ReSpeaker USB Mic Array",
      "connector": "USB-A"
    },
    "i2c": {
      "pins": {"sda": 7, "scl": 8},
      "frequency_hz": 100000,
      "devices": ["SCD41", "SGP40", "ENS160", "BMP388", "SHT40", "SEN0428"]
    },
    "uart_1": {
      "function": "SEN0395 mmWave Radar",
      "pins": {"tx": 17, "rx": 18}
    },
    "uart_2": {
      "function": "SEN0540 Voice Recognition",
      "pins": {"tx": 4, "rx": 5}
    }
  },

  "sensors": {
    "i2c_sensors": [
      {"model": "SCD41", "manufacturer": "Sensirion", "function": "CO2, Temperature, Humidity"},
      {"model": "SGP40", "manufacturer": "Sensirion", "function": "VOC Index"},
      {"model": "ENS160", "manufacturer": "ScioSense", "function": "eCO2, TVOC, AQI"},
      {"model": "BMP388", "manufacturer": "Bosch", "function": "Barometric Pressure, Altitude"},
      {"model": "SHT40", "manufacturer": "Sensirion", "function": "High-Precision Temp/Humidity"},
      {"model": "SEN0428", "manufacturer": "DFRobot", "function": "PM1.0, PM2.5, PM10"}
    ],
    "uart_sensors": [
      {"model": "SEN0395", "manufacturer": "DFRobot", "function": "mmWave Presence Detection", "uart": 1},
      {"model": "SEN0540", "manufacturer": "DFRobot", "function": "Offline Voice Recognition", "uart": 2}
    ]
  },

  "fasteners": {
    "standoff_screws": {
      "type": "M3x8 Pan Head Black Oxide",
      "quantity": 30
    },
    "standoff_nuts": {
      "type": "M3 Hex Nut Black Oxide",
      "quantity": 20
    },
    "pcb_screws": {
      "type": "M2.5x5 Pan Head",
      "quantity": 16
    },
    "wood_screws": {
      "type": "3.5x20mm Countersunk",
      "quantity": 12
    }
  },

  "design_files": {
    "primary_scad": "omni_p4_v4.1_bw_trace.scad",
    "shelf_dxf": [
      "shelf_level1_power_sensors.dxf",
      "shelf_level2_dac_amp.dxf",
      "shelf_level3_mcu_lcd.dxf"
    ],
    "archived": [
      "archive/omni_p4_detailed.scad"
    ]
  },

  "estimated_weight_kg": 3.9,
  "bw_formation_wedge_weight_kg": 6.5
}
