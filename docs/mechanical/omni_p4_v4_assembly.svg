<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-50 -100 850 800" width="850mm" height="800mm">
  <title>OMNI-P4 v4.1 Exploded Assembly View</title>
  <desc>B&amp;W Formation Wedge完全トレース: 440×243×232mm, 120° Sector</desc>

  <style>
    .outline { fill: none; stroke: #000; stroke-width: 0.6; }
    .thin { fill: none; stroke: #000; stroke-width: 0.3; }
    .fill-shell { fill: #d4c4b0; stroke: #000; stroke-width: 0.5; }
    .fill-baffle { fill: #c9b896; stroke: #000; stroke-width: 0.5; }
    .fill-driver { fill: #333; stroke: #000; stroke-width: 0.4; }
    .fill-cone { fill: #f5f0e6; stroke: #000; stroke-width: 0.3; }
    .fill-pcb { fill: #1a5c1a; stroke: #000; stroke-width: 0.3; }
    .fill-aluminum { fill: #c0c0c0; stroke: #000; stroke-width: 0.3; }
    .fill-lcd { fill: #1a1a2e; stroke: #000; stroke-width: 0.4; }
    .fill-front { fill: #2a2a2e; stroke: #000; stroke-width: 0.5; }
    .leader { fill: none; stroke: #ff0000; stroke-width: 0.4; }
    .title { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: #000; }
    .subtitle { font-family: Arial, sans-serif; font-size: 8px; fill: #000; font-weight: bold; }
    .annotation { font-family: Arial, sans-serif; font-size: 5px; fill: #333; }
    .callout { font-family: Arial, sans-serif; font-size: 5px; fill: #d00; font-weight: bold; }
    .small { font-family: Arial, sans-serif; font-size: 4px; fill: #555; }
    .calc { font-family: Arial, sans-serif; font-size: 4px; fill: #006600; font-style: italic; }
    .bw-ref { font-family: Arial, sans-serif; font-size: 6px; fill: #0066cc; font-weight: bold; }
  </style>

  <!-- Title -->
  <text x="380" y="-70" class="title" text-anchor="middle">OMNI-P4 v4.1 分解組立図</text>
  <text x="380" y="-55" class="subtitle" text-anchor="middle">EXPLODED ASSEMBLY - B&amp;W Formation Wedge Trace</text>
  <text x="380" y="-40" class="bw-ref" text-anchor="middle">公式寸法: 440mm × 243mm × 232mm | 120° Sector</text>
  <line x1="50" y1="-30" x2="710" y2="-30" class="outline"/>

  <!-- ========== 1. TOP SHELL (120° Sector - B&amp;W) ========== -->
  <g transform="translate(220, 0)">
    <!-- 120° sector shape with narrower back (r=11mm) -->
    <path d="M -160,20
             A 200,200 0 0,1 160,20
             L 8,145
             A 8,8 0 0,0 -8,145
             Z" class="fill-shell"/>
    <!-- Inner cavity -->
    <path d="M -150,28
             A 188,188 0 0,1 150,28
             L 6,138
             A 4,4 0 0,0 -6,138
             Z" class="thin" fill="#e8dcc8"/>

    <!-- Mic hole -->
    <circle cx="0" cy="65" r="22" fill="#e8dcc8" stroke="#000" stroke-width="0.3"/>

    <!-- Leader line -->
    <line x1="170" y1="55" x2="210" y2="35" class="leader"/>
    <circle cx="170" cy="55" r="2" fill="#ff0000"/>
    <text x="215" y="28" class="callout">1</text>
    <text x="215" y="38" class="annotation">TOP SHELL</text>
    <text x="215" y="48" class="small">120° Sector (B&amp;W)</text>
    <text x="215" y="58" class="small">12mm MDF</text>
    <text x="215" y="68" class="calc">背面幅: 19mm</text>
  </g>

  <!-- ========== 2. LEFT BAFFLE ========== -->
  <g transform="translate(100, 110)">
    <!-- Baffle with driver holes -->
    <polygon points="-8,0 8,0 6,150 -6,150" class="fill-baffle"/>
    <!-- Driver holes -->
    <circle cx="0" cy="45" r="30" fill="#e8dcc8" stroke="#000" stroke-width="0.3"/>
    <circle cx="0" cy="105" r="30" fill="#e8dcc8" stroke="#000" stroke-width="0.3"/>

    <line x1="-65" y1="75" x2="-15" y2="75" class="leader"/>
    <circle cx="-65" cy="75" r="2" fill="#ff0000"/>
    <text x="-120" y="65" class="callout">2</text>
    <text x="-120" y="75" class="annotation">LEFT BAFFLE</text>
    <text x="-120" y="85" class="small">15mm MDF</text>
    <text x="-120" y="95" class="small">2× Ø68 holes</text>
  </g>

  <!-- ========== 3. RIGHT BAFFLE ========== -->
  <g transform="translate(340, 110)">
    <polygon points="-8,0 8,0 6,150 -6,150" class="fill-baffle"/>
    <circle cx="0" cy="45" r="30" fill="#e8dcc8" stroke="#000" stroke-width="0.3"/>
    <circle cx="0" cy="105" r="30" fill="#e8dcc8" stroke="#000" stroke-width="0.3"/>

    <line x1="65" y1="75" x2="15" y2="75" class="leader"/>
    <circle cx="65" cy="75" r="2" fill="#ff0000"/>
    <text x="70" y="65" class="callout">3</text>
    <text x="70" y="75" class="annotation">RIGHT BAFFLE</text>
    <text x="70" y="85" class="small">15mm MDF</text>
  </g>

  <!-- ========== 4. LEFT DRIVER ========== -->
  <g transform="translate(55, 155)">
    <circle cx="0" cy="0" r="34" class="fill-driver"/>
    <circle cx="0" cy="0" r="28" class="fill-cone"/>
    <circle cx="0" cy="0" r="8" fill="#333"/>

    <line x1="-55" y1="0" x2="-40" y2="0" class="leader"/>
    <circle cx="-55" cy="0" r="2" fill="#ff0000"/>
    <text x="-105" y="-8" class="callout">4</text>
    <text x="-105" y="2" class="annotation">DRIVER (L)</text>
    <text x="-105" y="12" class="small">Peerless 2.5"</text>
  </g>

  <!-- ========== 5. LEFT PASSIVE ========== -->
  <g transform="translate(55, 215)">
    <circle cx="0" cy="0" r="32" class="fill-driver"/>
    <circle cx="0" cy="0" r="26" fill="#f0ebe0" stroke="#000" stroke-width="0.3"/>
  </g>

  <!-- ========== 6. RIGHT DRIVER ========== -->
  <g transform="translate(385, 155)">
    <circle cx="0" cy="0" r="34" class="fill-driver"/>
    <circle cx="0" cy="0" r="28" class="fill-cone"/>
    <circle cx="0" cy="0" r="8" fill="#333"/>

    <line x1="55" y1="0" x2="40" y2="0" class="leader"/>
    <circle cx="55" cy="0" r="2" fill="#ff0000"/>
    <text x="60" y="-8" class="callout">5</text>
    <text x="60" y="2" class="annotation">DRIVER (R)</text>
    <text x="60" y="12" class="small">Peerless 2.5"</text>
  </g>

  <!-- ========== 7. RIGHT PASSIVE ========== -->
  <g transform="translate(385, 215)">
    <circle cx="0" cy="0" r="32" class="fill-driver"/>
    <circle cx="0" cy="0" r="26" fill="#f0ebe0" stroke="#000" stroke-width="0.3"/>

    <line x1="55" y1="0" x2="40" y2="0" class="leader"/>
    <circle cx="55" cy="0" r="2" fill="#ff0000"/>
    <text x="60" y="-8" class="callout">6</text>
    <text x="60" y="2" class="annotation">PASSIVE (×2)</text>
    <text x="60" y="12" class="small">Dayton</text>
  </g>

  <!-- ========== 8. ELECTRONICS TOWER ========== -->
  <g transform="translate(220, 280)">
    <!-- Level 1 - XVF3800 -->
    <rect x="-32" y="0" width="64" height="32" rx="3" class="fill-aluminum"/>
    <rect x="-22" y="5" width="44" height="22" class="fill-pcb"/>
    <text x="0" y="20" class="small" text-anchor="middle" fill="#fff">XVF3800</text>

    <!-- Standoffs -->
    <rect x="-27" y="32" width="4" height="22" class="fill-aluminum"/>
    <rect x="23" y="32" width="4" height="22" class="fill-aluminum"/>

    <!-- Level 2 -->
    <rect x="-38" y="54" width="76" height="30" rx="3" class="fill-aluminum"/>
    <rect x="-28" y="60" width="56" height="18" class="fill-pcb"/>
    <text x="0" y="73" class="small" text-anchor="middle" fill="#fff">LEVEL 2</text>

    <!-- Standoffs -->
    <rect x="-33" y="84" width="4" height="20" class="fill-aluminum"/>
    <rect x="29" y="84" width="4" height="20" class="fill-aluminum"/>

    <!-- Level 3 - ESP32-P4 -->
    <rect x="-44" y="104" width="88" height="32" rx="3" class="fill-aluminum"/>
    <rect x="-34" y="110" width="68" height="20" class="fill-pcb"/>
    <text x="0" y="124" class="small" text-anchor="middle" fill="#fff">ESP32-P4</text>

    <line x1="-90" y1="70" x2="-50" y2="70" class="leader"/>
    <circle cx="-90" cy="70" r="2" fill="#ff0000"/>
    <text x="-145" y="60" class="callout">7</text>
    <text x="-145" y="70" class="annotation">ELECTRONICS</text>
    <text x="-145" y="80" class="annotation">TOWER</text>
    <text x="-145" y="90" class="small">3 Levels + Standoffs</text>
  </g>

  <!-- ========== 9. LCD MODULE ========== -->
  <g transform="translate(220, 430)">
    <rect x="-85" y="0" width="170" height="55" rx="4" class="fill-lcd"/>
    <rect x="-75" y="5" width="150" height="45" fill="#0a0a15" stroke="#333" stroke-width="0.3"/>

    <line x1="100" y1="28" x2="140" y2="28" class="leader"/>
    <circle cx="140" cy="28" r="2" fill="#ff0000"/>
    <text x="145" y="20" class="callout">8</text>
    <text x="145" y="30" class="annotation">7" LCD</text>
    <text x="145" y="40" class="small">170×105mm</text>
  </g>

  <!-- ========== 10. FRONT PANEL (Elliptical - B&amp;W) ========== -->
  <g transform="translate(220, 505)">
    <!-- Elliptical front panel 440×232mm scaled -->
    <ellipse cx="0" cy="58" rx="165" ry="72" class="fill-front"/>
    <!-- LCD opening -->
    <rect x="-75" y="28" width="150" height="55" rx="5" fill="#0a0a15" stroke="#333"/>
    <!-- Driver holes at X=±130 from center (scaled) -->
    <circle cx="-97" cy="40" r="26" fill="#222"/>
    <circle cx="-97" cy="78" r="26" fill="#222"/>
    <circle cx="97" cy="40" r="26" fill="#222"/>
    <circle cx="97" cy="78" r="26" fill="#222"/>

    <line x1="180" y1="58" x2="220" y2="58" class="leader"/>
    <circle cx="180" cy="58" r="2" fill="#ff0000"/>
    <text x="225" y="45" class="callout">9</text>
    <text x="225" y="55" class="annotation">FRONT PANEL</text>
    <text x="225" y="65" class="annotation">楕円形 (B&amp;W)</text>
    <text x="225" y="75" class="small">440×232mm</text>
    <text x="225" y="85" class="small">12mm MDF</text>
  </g>

  <!-- ========== 11. BOTTOM SHELL (120° Sector - B&amp;W) ========== -->
  <g transform="translate(220, 630)">
    <!-- 120° sector shape (inverted) -->
    <path d="M -160,110
             A 200,200 0 0,0 160,110
             L 8,-15
             A 8,8 0 0,1 -8,-15
             Z" class="fill-shell"/>
    <path d="M -150,102
             A 188,188 0 0,0 150,102
             L 6,-8
             A 4,4 0 0,1 -6,-8
             Z" class="thin" fill="#e8dcc8"/>

    <line x1="170" y1="55" x2="210" y2="75" class="leader"/>
    <circle cx="170" cy="55" r="2" fill="#ff0000"/>
    <text x="215" y="65" class="callout">10</text>
    <text x="215" y="75" class="annotation">BOTTOM SHELL</text>
    <text x="215" y="85" class="small">120° Sector (B&amp;W)</text>
    <text x="215" y="95" class="small">12mm MDF</text>
  </g>

  <!-- ========== ASSEMBLY SEQUENCE ========== -->
  <g transform="translate(520, 0)">
    <rect x="0" y="0" width="220" height="270" fill="#fafafa" stroke="#000" stroke-width="0.5"/>
    <rect x="0" y="0" width="220" height="22" fill="#e0e0e0" stroke="#000" stroke-width="0.5"/>
    <text x="110" y="15" class="subtitle" text-anchor="middle">組立順序</text>

    <text x="10" y="42" class="annotation">1. エレクトロニクスタワー組立</text>
    <text x="15" y="55" class="small">Level 1-3をスタンドオフで接続</text>

    <text x="10" y="75" class="annotation">2. ドライバーをバッフルに取付</text>
    <text x="15" y="88" class="small">Peerless + Dayton ×2 (X=±130mm)</text>

    <text x="10" y="108" class="annotation">3. バッフルを底面シェルに固定</text>
    <text x="15" y="121" class="small">気密シール必須</text>

    <text x="10" y="141" class="annotation">4. タワーをセンターに配置</text>

    <text x="10" y="161" class="annotation">5. 全ケーブル接続</text>
    <text x="15" y="174" class="small">I2S, I2C, Power</text>

    <text x="10" y="194" class="annotation">6. LCDをタワーに取付</text>

    <text x="10" y="214" class="annotation">7. 正面パネル取付</text>
    <text x="15" y="227" class="small">楕円形 440×232mm (B&amp;W)</text>

    <text x="10" y="247" class="annotation">8. 上面シェル取付</text>
    <text x="15" y="260" class="small">全接合部をシール</text>
  </g>

  <!-- ========== BILL OF MATERIALS ========== -->
  <g transform="translate(520, 290)">
    <rect x="0" y="0" width="220" height="200" fill="#fafafa" stroke="#000" stroke-width="0.5"/>
    <rect x="0" y="0" width="220" height="22" fill="#e0e0e0" stroke="#000" stroke-width="0.5"/>
    <text x="110" y="15" class="subtitle" text-anchor="middle">部品表 (BOM)</text>

    <text x="10" y="40" class="small" font-weight="bold">数量  部品名              材質/仕様</text>
    <line x1="5" y1="46" x2="215" y2="46" stroke="#ccc" stroke-width="0.3"/>

    <text x="10" y="62" class="small">2    シェルパネル       12mm MDF (120°)</text>
    <text x="10" y="78" class="small">1    正面パネル         12mm MDF (楕円)</text>
    <text x="10" y="94" class="small">2    内部バッフル       15mm MDF</text>
    <text x="10" y="110" class="small">3    シェルフプレート   2mm Aluminum</text>
    <text x="10" y="126" class="small">12   M3スタンドオフ     Aluminum</text>
    <text x="10" y="142" class="small">2    スピーカー         Peerless 2.5"</text>
    <text x="10" y="158" class="small">2    パッシブラジエーター Dayton</text>
    <text x="10" y="174" class="small">1    LCDモジュール      7" IPS</text>
    <text x="10" y="190" class="small">1    XVF3800            4-Mic PCB</text>
  </g>

  <!-- ========== B&amp;W SPECIFICATIONS ========== -->
  <g transform="translate(520, 510)">
    <rect x="0" y="0" width="220" height="150" fill="#f0f8ff" stroke="#0066cc" stroke-width="0.5"/>
    <rect x="0" y="0" width="220" height="22" fill="#0066cc" stroke="#0066cc" stroke-width="0.5"/>
    <text x="110" y="15" class="subtitle" text-anchor="middle" fill="#fff">B&amp;W Formation Wedge準拠</text>

    <text x="10" y="42" class="annotation">【公式寸法】</text>
    <text x="15" y="58" class="calc">Width: 440mm (17.3")</text>
    <text x="15" y="72" class="calc">Depth: 243mm (9.6")</text>
    <text x="15" y="86" class="calc">Height: 232mm (9.1")</text>

    <text x="10" y="106" class="annotation">【120°扇形パラメータ】</text>
    <text x="15" y="120" class="calc">前面半径 R = 254mm</text>
    <text x="15" y="134" class="calc">背面半径 r = 11mm</text>
    <text x="15" y="148" class="calc">背面幅 = 19mm</text>

    <text x="120" y="58" class="annotation">【ドライバー配置】</text>
    <text x="125" y="72" class="calc">X位置: ±130mm</text>
    <text x="125" y="86" class="calc">Y間隔: 70mm</text>
    <text x="125" y="100" class="calc">楕円内収まり: ✓</text>
  </g>
</svg>
