<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-100 -80 1100 850" width="1100mm" height="850mm">
  <title>OMNI-P4 v4.0 Engineering Drawing</title>
  <desc>正面: 楕円 (420×200mm) | 上面: 120°扇形セクター</desc>

  <style>
    .outline { fill: none; stroke: #000; stroke-width: 0.8; }
    .thin { fill: none; stroke: #000; stroke-width: 0.4; }
    .dimension { fill: none; stroke: #00f; stroke-width: 0.3; }
    .dim-text { font-family: Arial, sans-serif; font-size: 7px; fill: #00f; }
    .title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #000; }
    .subtitle { font-family: Arial, sans-serif; font-size: 9px; fill: #000; font-weight: bold; }
    .annotation { font-family: Arial, sans-serif; font-size: 5px; fill: #333; }
    .small { font-family: Arial, sans-serif; font-size: 4px; fill: #555; }
    .calc { font-family: Arial, sans-serif; font-size: 4px; fill: #006600; font-style: italic; }
    .center { fill: none; stroke: #f00; stroke-width: 0.25; stroke-dasharray: 8,2,2,2; }
    .hidden { fill: none; stroke: #000; stroke-width: 0.4; stroke-dasharray: 4,2; }
    .construction { fill: none; stroke: #999; stroke-width: 0.2; stroke-dasharray: 2,2; }
    .fill-chamber { fill: #e8e8e8; stroke: #000; stroke-width: 0.4; }
    .fill-center { fill: #f0f0f0; stroke: #000; stroke-width: 0.4; }
    .angle-arc { fill: none; stroke: #c00; stroke-width: 0.4; }
  </style>

  <!-- ==================== TITLE BLOCK ==================== -->
  <text x="450" y="-50" class="title" text-anchor="middle">OMNI-P4 v4.0 詳細設計図</text>
  <text x="450" y="-30" class="subtitle" text-anchor="middle">正面: 楕円形 | 上面: 120°扇形セクター | Integrated Acoustic Wedge</text>
  <line x1="0" y1="-20" x2="900" y2="-20" class="outline"/>

  <!-- ==================== GEOMETRY CALCULATIONS BOX ==================== -->
  <rect x="700" y="-15" width="200" height="120" fill="#fffff0" stroke="#999" stroke-width="0.5"/>
  <text x="710" y="0" class="subtitle">幾何学計算</text>

  <text x="710" y="15" class="annotation">【120°扇形パラメータ】</text>
  <text x="715" y="27" class="calc">頂角 θ = 120° = 2π/3 rad</text>
  <text x="715" y="37" class="calc">半頂角 = 60°</text>
  <text x="715" y="47" class="calc">前面弦長 = 420mm</text>
  <text x="715" y="57" class="calc">弦 = 2R·sin(θ/2) = 2R·sin(60°)</text>
  <text x="715" y="67" class="calc">420 = 2R × 0.866 = 1.732R</text>
  <text x="715" y="77" class="calc">R(前面) = 420 ÷ 1.732 = 242.5mm</text>
  <text x="715" y="87" class="calc">奥行き = 220mm</text>
  <text x="715" y="97" class="calc">r(背面) = 242.5 - 220 = 22.5mm</text>
  <text x="715" y="107" class="calc">背面幅 = 2 × 22.5 × sin(60°) = 39mm</text>

  <!-- ==================== 1. FRONT VIEW (正面図) - ELLIPSE ==================== -->
  <text x="210" y="10" class="subtitle">1. 正面図 (FRONT VIEW) - 楕円形</text>

  <!-- Outer ellipse: rx=210, ry=100 for 420×200mm -->
  <ellipse cx="210" cy="130" rx="210" ry="100" class="outline"/>

  <!-- Inner ellipse (12mm shell thickness) -->
  <ellipse cx="210" cy="130" rx="198" ry="88" class="thin"/>

  <!-- Center lines -->
  <line x1="210" y1="10" x2="210" y2="250" class="center"/>
  <line x1="-20" y1="130" x2="440" y2="130" class="center"/>

  <!-- LCD opening 190×108mm -->
  <rect x="115" y="70" width="190" height="108" rx="5" ry="5" class="thin"/>

  <!-- Left drivers -->
  <circle cx="55" cy="95" r="34" class="thin"/>
  <circle cx="55" cy="95" r="28" class="thin"/>
  <circle cx="55" cy="95" r="8" class="thin"/>
  <circle cx="55" cy="170" r="34" class="thin"/>
  <circle cx="55" cy="170" r="28" class="thin"/>

  <!-- Right drivers -->
  <circle cx="365" cy="95" r="34" class="thin"/>
  <circle cx="365" cy="95" r="28" class="thin"/>
  <circle cx="365" cy="95" r="8" class="thin"/>
  <circle cx="365" cy="170" r="34" class="thin"/>
  <circle cx="365" cy="170" r="28" class="thin"/>

  <!-- Dimensions: Width 420mm -->
  <line x1="0" y1="250" x2="420" y2="250" class="dimension"/>
  <line x1="0" y1="230" x2="0" y2="255" class="dimension"/>
  <line x1="420" y1="230" x2="420" y2="255" class="dimension"/>
  <polygon points="0,250 8,247 8,253" fill="#00f"/>
  <polygon points="420,250 412,247 412,253" fill="#00f"/>
  <text x="210" y="265" class="dim-text" text-anchor="middle">420 (2a = 長軸)</text>

  <!-- Dimensions: Height 200mm -->
  <line x1="440" y1="30" x2="440" y2="230" class="dimension"/>
  <line x1="420" y1="30" x2="445" y2="30" class="dimension"/>
  <line x1="420" y1="230" x2="445" y2="230" class="dimension"/>
  <polygon points="440,30 437,38 443,38" fill="#00f"/>
  <polygon points="440,230 437,222 443,222" fill="#00f"/>
  <text x="455" y="135" class="dim-text" text-anchor="start">200 (2b = 短軸)</text>

  <!-- Ellipse parameters -->
  <text x="210" y="285" class="calc" text-anchor="middle">楕円: a=210mm, b=100mm</text>
  <text x="210" y="295" class="calc" text-anchor="middle">楕円方程式: (x/210)² + (y/100)² = 1</text>

  <!-- Annotations -->
  <text x="210" y="125" class="annotation" text-anchor="middle">7" LCD</text>
  <text x="55" y="95" class="small" text-anchor="middle">DRIVER</text>
  <text x="55" y="170" class="small" text-anchor="middle">PASSIVE</text>
  <text x="365" y="95" class="small" text-anchor="middle">DRIVER</text>
  <text x="365" y="170" class="small" text-anchor="middle">PASSIVE</text>

  <!-- Driver position dimension -->
  <line x1="55" y1="220" x2="210" y2="220" class="dimension"/>
  <text x="132" y="218" class="dim-text" text-anchor="middle">155</text>

  <!-- ==================== 2. TOP VIEW (上面図) - 120° SECTOR ==================== -->
  <text x="680" y="140" class="subtitle">2. 上面図 (TOP VIEW) - 120°扇形</text>

  <!--
    Sector geometry:
    - Apex at (680, 530) - virtual apex behind the unit
    - Front radius R = 242.5mm, at Y = 530 - 242.5 = 287.5
    - Back radius r = 22.5mm, at Y = 530 - 22.5 = 507.5
    - Sector angle = 120° (±60° from centerline)
    - Front half-width = 242.5 × sin(60°) = 210mm
    - Back half-width = 22.5 × sin(60°) = 19.5mm
  -->

  <!-- Virtual apex point (construction) -->
  <circle cx="680" cy="530" r="2" fill="#999"/>
  <text x="685" y="535" class="calc">頂点 (仮想)</text>

  <!-- Construction lines showing 120° angle -->
  <line x1="680" y1="530" x2="470" y2="287.5" class="construction"/>
  <line x1="680" y1="530" x2="890" y2="287.5" class="construction"/>

  <!-- 120° angle arc at apex -->
  <path d="M 650,500 A 40,40 0 0,1 710,500" class="angle-arc"/>
  <text x="680" y="495" class="dim-text" text-anchor="middle" fill="#c00">120°</text>

  <!-- Main sector shape -->
  <path d="M 470,287.5
           A 242.5,242.5 0 0,1 890,287.5
           L 699.5,507.5
           A 22.5,22.5 0 0,0 660.5,507.5
           Z" class="outline"/>

  <!-- Inner cavity (12mm shell) -->
  <path d="M 482,299.5
           A 230.5,230.5 0 0,1 878,299.5
           L 693.5,501.5
           A 16.5,16.5 0 0,0 666.5,501.5
           Z" class="thin"/>

  <!-- Center line -->
  <line x1="680" y1="270" x2="680" y2="540" class="center"/>

  <!-- Internal baffles (at ±60mm from center for 120mm center zone) -->
  <line x1="620" y1="300" x2="656" y2="505" class="hidden"/>
  <line x1="740" y1="300" x2="704" y2="505" class="hidden"/>

  <!-- Mic opening -->
  <circle cx="680" cy="420" r="30" class="thin"/>

  <!-- Dimension: Front width (chord) 420mm -->
  <line x1="470" y1="272" x2="890" y2="272" class="dimension"/>
  <line x1="470" y1="287.5" x2="470" y2="267" class="dimension"/>
  <line x1="890" y1="287.5" x2="890" y2="267" class="dimension"/>
  <text x="680" y="262" class="dim-text" text-anchor="middle">420 (前面弦長)</text>

  <!-- Dimension: Back width 39mm -->
  <line x1="660.5" y1="520" x2="699.5" y2="520" class="dimension"/>
  <line x1="660.5" y1="507.5" x2="660.5" y2="525" class="dimension"/>
  <line x1="699.5" y1="507.5" x2="699.5" y2="525" class="dimension"/>
  <text x="680" y="535" class="dim-text" text-anchor="middle">39 (背面)</text>

  <!-- Dimension: Depth 220mm -->
  <line x1="910" y1="287.5" x2="910" y2="507.5" class="dimension"/>
  <line x1="890" y1="287.5" x2="915" y2="287.5" class="dimension"/>
  <line x1="699.5" y1="507.5" x2="915" y2="507.5" class="dimension"/>
  <text x="925" y="400" class="dim-text" text-anchor="start">220</text>

  <!-- Dimension: Front radius 242.5mm -->
  <line x1="680" y1="530" x2="890" y2="287.5" class="dimension"/>
  <text x="800" y="420" class="dim-text" transform="rotate(-60, 800, 420)">R = 242.5</text>

  <!-- Dimension: Back radius 22.5mm -->
  <line x1="680" y1="530" x2="699.5" y2="507.5" class="dimension"/>
  <text x="695" y="515" class="dim-text">r = 22.5</text>

  <!-- Annotations -->
  <text x="550" y="380" class="annotation" text-anchor="middle">LEFT</text>
  <text x="550" y="392" class="small" text-anchor="middle">SPEAKER</text>
  <text x="810" y="380" class="annotation" text-anchor="middle">RIGHT</text>
  <text x="810" y="392" class="small" text-anchor="middle">SPEAKER</text>
  <text x="680" y="360" class="annotation" text-anchor="middle">CENTER</text>
  <text x="680" y="425" class="small" text-anchor="middle">MIC</text>

  <!-- ==================== 3. SIDE VIEW (側面図) ==================== -->
  <text x="150" y="340" class="subtitle">3. 側面図 (SIDE VIEW)</text>

  <!-- Side profile - elliptical -->
  <ellipse cx="150" cy="460" rx="110" ry="100" class="outline"/>
  <ellipse cx="150" cy="460" rx="98" ry="88" class="thin"/>

  <!-- Center lines -->
  <line x1="150" y1="340" x2="150" y2="580" class="center"/>
  <line x1="20" y1="460" x2="280" y2="460" class="center"/>

  <!-- Dimension: Depth 220mm -->
  <line x1="40" y1="580" x2="260" y2="580" class="dimension"/>
  <line x1="40" y1="560" x2="40" y2="585" class="dimension"/>
  <line x1="260" y1="560" x2="260" y2="585" class="dimension"/>
  <text x="150" y="598" class="dim-text" text-anchor="middle">220 (奥行き)</text>

  <!-- Dimension: Height 200mm -->
  <line x1="280" y1="360" x2="280" y2="560" class="dimension"/>
  <line x1="260" y1="360" x2="285" y2="360" class="dimension"/>
  <line x1="260" y1="560" x2="285" y2="560" class="dimension"/>
  <text x="295" y="465" class="dim-text" text-anchor="start">200</text>

  <!-- Annotations -->
  <text x="55" y="465" class="small">FRONT</text>
  <text x="225" y="465" class="small">BACK</text>

  <!-- ==================== 4. HORIZONTAL SECTION (水平断面図) ==================== -->
  <text x="450" y="580" class="subtitle">4. 水平断面図 (Z = 100mm)</text>

  <!-- Section through the 120° sector -->
  <!-- Using same geometry as top view but with hatching -->

  <!-- Apex at (450, 760) -->
  <circle cx="450" cy="760" r="1.5" fill="#999"/>

  <!-- Outer sector -->
  <path d="M 240,517.5
           A 242.5,242.5 0 0,1 660,517.5
           L 469.5,737.5
           A 22.5,22.5 0 0,0 430.5,737.5
           Z" class="outline"/>

  <!-- Inner cavity -->
  <path d="M 252,529.5
           A 230.5,230.5 0 0,1 648,529.5
           L 463.5,731.5
           A 16.5,16.5 0 0,0 436.5,731.5
           Z" class="thin"/>

  <!-- Left chamber -->
  <path d="M 252,529.5
           A 230.5,230.5 0 0,0 390,640
           L 425,735
           L 436.5,731.5
           L 436.5,529.5
           Z" class="fill-chamber"/>

  <!-- Right chamber -->
  <path d="M 648,529.5
           A 230.5,230.5 0 0,1 510,640
           L 475,735
           L 463.5,731.5
           L 463.5,529.5
           Z" class="fill-chamber"/>

  <!-- Center tower zone -->
  <path d="M 390,640
           L 510,640
           L 475,735
           L 463.5,731.5
           A 16.5,16.5 0 0,1 436.5,731.5
           L 425,735
           Z" class="fill-center"/>

  <!-- Baffles -->
  <line x1="390" y1="529.5" x2="425" y2="735" stroke="#000" stroke-width="2"/>
  <line x1="510" y1="529.5" x2="475" y2="735" stroke="#000" stroke-width="2"/>

  <!-- Center line -->
  <line x1="450" y1="500" x2="450" y2="770" class="center"/>

  <!-- Dimensions -->
  <line x1="240" y1="502" x2="660" y2="502" class="dimension"/>
  <text x="450" y="495" class="dim-text" text-anchor="middle">420</text>

  <line x1="430.5" y1="752" x2="469.5" y2="752" class="dimension"/>
  <text x="450" y="762" class="dim-text" text-anchor="middle">39</text>

  <!-- Annotations -->
  <text x="320" y="600" class="annotation" text-anchor="middle">LEFT</text>
  <text x="320" y="612" class="small" text-anchor="middle">2.95L</text>
  <text x="580" y="600" class="annotation" text-anchor="middle">RIGHT</text>
  <text x="580" y="612" class="small" text-anchor="middle">2.95L</text>
  <text x="450" y="680" class="annotation" text-anchor="middle">CENTER</text>

  <text x="400" y="650" class="small">15mm</text>
  <text x="490" y="650" class="small">15mm</text>
  <text x="260" y="545" class="small">12mm MDF</text>

  <!-- ==================== SPECIFICATIONS TABLE ==================== -->
  <rect x="0" y="620" width="200" height="150" fill="#fafafa" stroke="#000" stroke-width="0.5"/>
  <text x="100" y="638" class="subtitle" text-anchor="middle">仕様一覧</text>
  <line x1="0" y1="645" x2="200" y2="645" stroke="#000" stroke-width="0.3"/>

  <text x="10" y="660" class="annotation">【外形寸法】</text>
  <text x="15" y="673" class="small">前面幅: 420mm (弦長)</text>
  <text x="15" y="684" class="small">背面幅: 39mm (弦長)</text>
  <text x="15" y="695" class="small">奥行き: 220mm</text>
  <text x="15" y="706" class="small">高さ: 200mm</text>
  <text x="15" y="717" class="small">扇形角度: 120°</text>

  <text x="10" y="732" class="annotation">【材料】</text>
  <text x="15" y="745" class="small">シェル: 12mm MDF</text>
  <text x="15" y="756" class="small">バッフル: 15mm MDF</text>
  <text x="15" y="767" class="small">ドライバー: Ø68mm</text>

  <!-- ==================== ACOUSTIC CALCULATIONS ==================== -->
  <rect x="220" y="620" width="200" height="150" fill="#f0fff0" stroke="#000" stroke-width="0.5"/>
  <text x="320" y="638" class="subtitle" text-anchor="middle">音響計算</text>
  <line x1="220" y1="645" x2="420" y2="645" stroke="#000" stroke-width="0.3"/>

  <text x="230" y="660" class="annotation">【容積計算】</text>
  <text x="235" y="673" class="calc">扇形面積 = (θ/2)(R² - r²)</text>
  <text x="235" y="684" class="calc">= (π/3)(242.5² - 22.5²)</text>
  <text x="235" y="695" class="calc">= (π/3)(58806.25 - 506.25)</text>
  <text x="235" y="706" class="calc">= (π/3) × 58300</text>
  <text x="235" y="717" class="calc">= 61,045 mm²</text>

  <text x="235" y="732" class="calc">全体容積 = 61,045 × 200</text>
  <text x="235" y="743" class="calc">= 12,209,000 mm³ = 12.2L</text>

  <text x="235" y="758" class="calc">スピーカー容積 (各チャンネル)</text>
  <text x="235" y="769" class="calc">≈ 3.0L (センター除く)</text>

  <!-- ==================== TITLE BLOCK ==================== -->
  <rect x="700" y="620" width="200" height="150" fill="#f5f5f5" stroke="#000" stroke-width="0.5"/>
  <rect x="700" y="620" width="200" height="25" fill="#e0e0e0" stroke="#000" stroke-width="0.5"/>
  <text x="800" y="638" class="subtitle" text-anchor="middle">OMNI-P4 v4.0</text>

  <line x1="700" y1="695" x2="900" y2="695" stroke="#000" stroke-width="0.3"/>
  <line x1="800" y1="645" x2="800" y2="770" stroke="#000" stroke-width="0.3"/>

  <text x="710" y="660" class="small">Project:</text>
  <text x="710" y="672" class="annotation">OMNI-P4 Smart Console</text>

  <text x="810" y="660" class="small">Drawing:</text>
  <text x="810" y="672" class="annotation">ASSEMBLY</text>

  <text x="710" y="708" class="small">Designer: Claude</text>
  <text x="710" y="722" class="small">Version: 4.0</text>
  <text x="710" y="736" class="small">Date: 2025-01</text>

  <text x="810" y="708" class="small">Scale: NTS</text>
  <text x="810" y="722" class="small">Units: mm</text>
  <text x="810" y="736" class="small">Sheet: 1/1</text>

  <text x="710" y="758" class="small">形状: 楕円 + 120°扇形</text>
  <text x="810" y="758" class="small">Rev: B</text>
</svg>
